# ESP32智能桌面助手 - 配置指南

## 🔑 API密钥配置

为了让智能助手的所有联网功能（天气、语音识别、AI对话）正常工作，您需要配置相关的API密钥。我们已将所有密钥集中到 `main/secrets.h` 文件中进行管理，以便于配置和保护您的隐私。

**配置步骤**:

1.  **复制示例文件**: 在 `main` 目录下，找到 `secrets.h.example` 文件。将其复制一份，并重命名为 `secrets.h`。

2.  **编辑密钥文件**: 打开刚刚创建的 `main/secrets.h` 文件，您会看到如下内容：

    ```c
    // 高德天气 API Key
    #define WEATHER_API_KEY "YOUR_GAODE_WEATHER_API_KEY"

    // 智谱AI GLM-4-Flash API Key
    #define GLM_API_KEY "YOUR_GLM_API_KEY"

    // 腾讯云语音识别 API Key
    #define TENCENT_SECRET_ID "YOUR_TENCENT_SECRET_ID"
    #define TENCENT_SECRET_KEY "YOUR_TENCENT_SECRET_KEY"
    ```

3.  **填入您的密钥**:
    *   **高德天气**: 访问 [高德开放平台](https://lbs.amap.com/)，创建应用并获取Web服务类型的API Key，填入 `WEATHER_API_KEY`。
    *   **智谱AI**: 访问 [智谱AI开放平台](https://open.bigmodel.cn/)，在"API密钥管理"中获取API Key，填入 `GLM_API_KEY`。
    *   **腾讯云**: 访问 [腾讯云控制台](https://console.cloud.tencent.com/)，在"API密钥管理"中获取 `SecretId` 和 `SecretKey`，分别填入 `TENCENT_SECRET_ID` 和 `TENCENT_SECRET_KEY`。

> **安全提示**: `secrets.h` 文件已被Git忽略，不会被提交到代码库。请妥善保管您的密钥，不要在任何公开场合泄露。

## 🔧 硬件配置要点

### INMP441麦克风模块
- **重要**：L/R引脚必须连接到GND（左声道输出）
- 使用高质量杜邦线连接，避免信号干扰
- 确保3.3V电源稳定

### DS3231时钟模块
- 需要纽扣电池以保持时间准确性
- I2C连接确保稳定，避免松动

### 显示屏连接
- 检查SPI连接的稳定性
- 确认背光引脚连接正确

## ⚠️ 安全注意事项

1. **API密钥安全**
   - 不要将包含真实API密钥的代码提交到公开仓库
   - 定期更换API密钥
   - 监控API使用量和费用

2. **网络安全**
   - 确保WiFi网络安全
   - 避免在公共网络中使用敏感功能

## 🐛 常见问题解决

### 语音识别不工作
- 检查麦克风硬件连接
- 验证腾讯云API密钥配置
- 确认WiFi连接稳定

### AI对话失败
- 检查GLM-4-Flash API Key配置
- 确认网络连接
- 查看串口输出的详细错误信息

### 编译错误
- 确保已运行LVGL设置脚本
- 检查ESP-IDF环境配置
- 确认目标芯片设置为esp32s3

### 显示问题
- 检查LVGL库是否正确下载
- 验证显示屏硬件连接
- 确认背光引脚工作正常

## 📋 配置检查清单

### 编译前检查
- [ ] 已运行LVGL设置脚本
- [ ] 配置腾讯云API密钥
- [ ] 配置GLM-4-Flash API Key
- [ ] 设置目标芯片为esp32s3

### 硬件连接检查
- [ ] ST7789显示屏连接正确
- [ ] DS3231时钟模块连接正确
- [ ] EC11旋转编码器连接正确
- [ ] INMP441麦克风连接正确（L/R接地）

### 功能测试检查
- [ ] 时钟显示正常
- [ ] 桌面切换正常
- [ ] 定时器功能正常
- [ ] 闹钟功能正常
- [ ] 天气预报正常
- [ ] 语音识别正常
- [ ] AI对话正常

---

配置完成后，你的智能桌面助手就可以正常工作了！🚀 